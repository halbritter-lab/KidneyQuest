---
phase: 06-visual-polish
plan: 05
type: execute
wave: 4
depends_on: ["06-04"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Game visually looks like a kidney-themed runner, not a placeholder prototype"
    - "All visual polish features are working together without conflicts"
    - "Performance is acceptable (above 55fps on target hardware)"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete visual polish of KidneyQuest by playing through the full game flow and checking each visual feature against the Phase 6 requirements.

Purpose: All code changes are complete. This checkpoint confirms the visual experience works as intended when played as a real user would experience it.

Output: Verified visual polish, ready for sprite PNG integration when available.
</objective>

<execution_context>
@C:\Users\bernt\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\bernt\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-visual-polish/06-CONTEXT.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete visual polish system for KidneyQuest:
- 5-layer parallax background with warm kidney-interior palette (purples, pinks, corals)
- Floating ambient particles in background
- Sprite-based rendering paths for player, obstacles, and genes (with procedural fallback active)
- Gene glow effect with pulsing shadowBlur (drawGenes wired with guard -- active once Phase 5 genes array exists)
- Obstacle breathing/pulsing animation
- Screen shake on death (via existing DYING state + drawWithShake)
- Particle burst effect on death (via triggerDeath)
- Polished start screen with pixel art "KidneyQuest" title, "Collect the Genes!" tagline, and zebra hero shot
- Polished game over screen with score breakdown including in-session best score
- Player death animation state with frozen flag
- CSS image-rendering: pixelated for crisp pixel art
- New modules: sprites.js (loader), particles.js (pool system)
  </what-built>
  <how-to-verify>
Open index.html in a browser and check each of the following:

**Start Screen (VIZP-07 override):**
1. Warm parallax background visible (purples, pinks, corals gradient -- not the old dark blue)
2. Floating particles drift through the background
3. "KidneyQuest" title in gold pixel art style with dark outline
4. "Collect the Genes!" tagline visible BELOW the title at a clearly smaller font size than the title (title is 64px, tagline should be visibly smaller at ~28px)
5. Zebra character visible (procedural since no sprite PNGs yet)
6. "Press Space to Start" pulsing
7. Ground scrolls slowly at the bottom

**Countdown:**
8. Press Space -- countdown plays (3-2-1-Go!)
9. Background continues scrolling during countdown

**Gameplay:**
10. Background layers scroll at different speeds (parallax effect visible)
11. Obstacles render with subtle breathing/pulsing animation
12. Ground markers scroll at full game speed
13. Distance counter visible in top-right (not shaking)

**Death and Game Over (let player collide with an obstacle):**
14. Screen shakes briefly during DYING state (existing drawWithShake)
15. Red particles burst from player position on collision
16. Zebra shows death animation (or holds last frame since procedural doesn't have death yet)
17. "Game Over" text in red pixel art style
18. Killer obstacle name displayed ("Hit a Kidney Stone!" etc.)
19. Score breakdown shows distance in meters, genes count, total score
20. "Press Space to Retry" pulses after cooldown

**Best Score (play and die at least twice):**
21. After dying the second time, game over screen shows "Best: Xm" with the distance from the better of the previous runs
22. Best score is tracked in-session only (refreshing the page resets it)

**Performance:**
23. Open DevTools Performance tab, record 10 seconds of gameplay
24. Frame rate should stay above 55fps

**No regressions:**
25. Jump physics unchanged (Space to jump, double jump works)
26. Pause works (Escape key)
27. No console errors
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Human verification of all VIZP requirements:
- VIZP-01: Zebra sprite rendering path exists (active when PNGs provided, procedural fallback active now)
- VIZP-02: Run cycle animation path exists (6 frames mapped in ZEBRA_FRAME_START)
- VIZP-03: Jump/fall animation states mapped to distinct sprite frames
- VIZP-04: Obstacle sprite rendering path exists with procedural fallback
- VIZP-05: Gene glow effect with pulsing shadowBlur (drawGenes wired with guard -- verifiable when Phase 5 genes exist)
- VIZP-06: 5-layer parallax background with different scroll speeds
- VIZP-07: KidneyQuest title (64px) + tagline (28px, visually distinct smaller size) on start screen (CeRKiD branding override honored)
- VIZP-08: Game over score breakdown including in-session best score (no localStorage needed)
</verification>

<success_criteria>
All 27 verification steps pass. Game looks like a themed kidney runner instead of a prototype. Performance is acceptable. No regressions in gameplay mechanics. Best score displays after multiple runs. Tagline is visually distinct (smaller) from the title.
</success_criteria>

<output>
After completion, create `.planning/phases/06-visual-polish/06-05-SUMMARY.md`
</output>
