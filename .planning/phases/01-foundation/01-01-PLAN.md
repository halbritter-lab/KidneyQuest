---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - index.html
  - css/style.css
  - js/config.js
autonomous: true

must_haves:
  truths:
    - "Opening index.html in a browser displays a centered canvas with dark background and no console errors"
    - "All game constants (canvas size, colors, physics values, speeds) live in a single config.js file"
    - "Canvas element is focusable and ready for keyboard input without clicking"
  artifacts:
    - path: "index.html"
      provides: "HTML entry point with single script type=module, canvas element with tabindex, viewport meta"
      contains: "script type=\"module\""
    - path: "css/style.css"
      provides: "Page layout centering canvas on dark background, mobile touch-action prevention"
      contains: "#game-container"
    - path: "js/config.js"
      provides: "Flat CONFIG object with all tunable constants as default export"
      contains: "export default"
  key_links:
    - from: "index.html"
      to: "css/style.css"
      via: "link rel=stylesheet"
      pattern: "style\\.css"
    - from: "index.html"
      to: "js/main.js"
      via: "script type=module src"
      pattern: "type=\"module\" src=\"js/main\\.js\""
---

<objective>
Create the project skeleton for KidneyQuest Phase 1: the HTML entry point, CSS layout, and centralized config module.

Purpose: Establish the file structure, canvas element, page styling, and config-driven architecture that all subsequent modules will build on. This is the foundation that Phases 2-6 extend.
Output: Three files (index.html, css/style.css, js/config.js) forming a working HTML page with a centered dark canvas.
</objective>

<execution_context>
@C:\Users\bernt\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\bernt\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-CONTEXT.md
@.planning/phases/01-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create config.js with flat CONFIG default export</name>
  <files>js/config.js</files>
  <action>
Rewrite js/config.js (replacing the existing POC version which uses named exports and wrong dimensions).

Create a single flat CONFIG object as default export with ALL tunable constants at top level:

Canvas dimensions:
- CANVAS_WIDTH: 1280
- CANVAS_HEIGHT: 720

Colors (from CONTEXT.md locked decisions):
- BACKGROUND_COLOR: '#1a1a2e' (deep dark blue-black)
- GROUND_COLOR: '#333355' (subtle ground line, slightly lighter than background)
- TEXT_COLOR: '#FFFFFF'
- PLAYER_COLOR: '#00FF00' (placeholder for Phase 2)

Physics (for Phase 2+, but config must contain them now per INFR-02):
- GRAVITY: 1800 (px/s^2)
- JUMP_VELOCITY: -650 (px/s, negative = up)
- GROUND_Y: 600 (px from top -- ground line position, leaves room for runner)

Speeds:
- GAME_SPEED: 200 (px/s initial scroll)
- SPEED_INCREMENT: 5 (px/s per second of acceleration)
- MAX_SPEED: 500 (px/s cap)

Ground line:
- GROUND_LINE_WIDTH: 2 (px thickness)

Entity type arrays (for Phase 4+, but config should contain stubs):
- OBSTACLE_TYPES: array with kidney-stone and blockage objects (name, width, height, color)
- GENE_TYPES: array with PKD1, COL4A5, NPHS1 objects (name, color, points)

Use `export default { ... }` syntax (NOT named exports). The object must be mutable at runtime so workshop participants can tweak values in the browser console.

IMPORTANT: Do NOT include `Object.freeze()` or any immutability pattern -- mutability is intentional per CONTEXT.md.
  </action>
  <verify>
Read js/config.js and confirm:
1. Uses `export default { ... }` (not named exports)
2. Contains CANVAS_WIDTH: 1280 and CANVAS_HEIGHT: 720
3. Contains BACKGROUND_COLOR: '#1a1a2e'
4. Contains GRAVITY, JUMP_VELOCITY, GROUND_Y, GAME_SPEED
5. Contains OBSTACLE_TYPES and GENE_TYPES arrays
6. No Object.freeze or const that prevents mutation
  </verify>
  <done>js/config.js exports a flat mutable CONFIG object via default export containing all game constants at top level</done>
</task>

<task type="auto">
  <name>Task 2: Create index.html and style.css for centered canvas layout</name>
  <files>index.html, css/style.css</files>
  <action>
Rewrite index.html (replacing existing POC version). Structure:

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>KidneyQuest</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div id="game-container">
    <canvas id="game-canvas" tabindex="0"></canvas>
  </div>
  <script type="module" src="js/main.js"></script>
</body>
</html>
```

Key requirements:
- Canvas element MUST have `tabindex="0"` for keyboard focus (Pattern 5 from RESEARCH.md)
- Single `<script type="module">` pointing to js/main.js (INFR-01)
- Viewport meta with maximum-scale=1.0, user-scalable=no (mobile zoom prevention)
- REMOVE the POC's inline error handler script -- it was a debug tool, not needed for clean foundation. If errors occur, they should appear in the browser console naturally.

Rewrite css/style.css:

- Page background: #111122 (darker than canvas background #1a1a2e, creates contrast)
- Body: flexbox centering (justify-content: center, align-items: center), 100vh height, overflow: hidden
- Reset: *, margin: 0, padding: 0, box-sizing: border-box
- Canvas: display: block (removes inline gap)
- #game-container: relative positioning, subtle box-shadow for depth
- Touch prevention on canvas: `touch-action: none` (CSS-level mobile scroll/zoom prevention)
- User select prevention: `user-select: none; -webkit-user-select: none` on body
- Canvas outline: `outline: none` to hide focus ring (we auto-focus it, focus ring is ugly on a game canvas)
- Font family on body: system sans-serif stack

Do NOT set canvas width/height in CSS -- that's handled by JavaScript in Plan 02 (Pattern 2 from RESEARCH.md).
  </action>
  <verify>
Open index.html in a browser (serve via `npx http-server -p 8080` or similar). Confirm:
1. Page loads with dark background, no console errors
2. Canvas element is present and centered on the page
3. Canvas has tabindex="0" attribute
4. Only one script tag with type="module"
5. No inline error handler script from the POC
  </verify>
  <done>index.html has a single module script entry point with focusable canvas; style.css centers the canvas on a dark page with mobile touch prevention</done>
</task>

</tasks>

<verification>
1. `js/config.js` uses `export default` and contains all required constants
2. `index.html` has `<canvas id="game-canvas" tabindex="0">` and `<script type="module" src="js/main.js">`
3. `css/style.css` centers the game container and prevents mobile scroll/zoom
4. No console errors when opening index.html (the module script may fail to load main.js since Plan 02 hasn't created it yet -- that's expected)
</verification>

<success_criteria>
- config.js exports a flat mutable CONFIG object with canvas dimensions (1280x720), colors (#1a1a2e background), physics values, speeds, and entity type arrays
- index.html is a clean entry point with canvas tabindex="0" and single module script
- style.css centers the canvas on a dark page background with touch-action: none
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
